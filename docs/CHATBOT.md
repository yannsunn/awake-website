# 🤖 チャットボット実装ドキュメント

## 概要
株式会社Awakeのホームページに統合されたAI搭載チャットボットです。Claude 3.5 Sonnetを使用し、会社情報に基づいて自然な対話を提供します。

---

## 📋 機能

### ✅ 対応可能な質問
- 会社情報（設立、代表、ミッション）
- 提供サービスの詳細
  - ホームページ制作
  - AIチャットボット開発
  - Amazon代理店サービス
- 料金プラン
- 営業時間・連絡先
- お問い合わせ方法

### ❌ 対応範囲外
- 外部サイトの情報
- 他社サービスに関する質問
- 一般的な技術サポート
- 天気やニュースなどの一般情報
- 外部操作の指示・実行

---

## 🏗️ アーキテクチャ

```
[フロントエンド]
├── ChatWidget.tsx          # UIコンポーネント（右下のボタン & チャットウィンドウ）
└── layout.tsx              # 全ページに表示

[バックエンド]
├── /api/chat/route.ts      # Claude APIとの連携エンドポイント
└── chatbot-prompt.ts       # システムプロンプト（会社情報・対応ルール）

[データソース]
└── company-data.ts         # 会社情報の一元管理
```

---

## 🚀 セットアップ手順

### 1. 環境変数の設定
`.env.local` ファイルに以下を追加：
```bash
ANTHROPIC_API_KEY=your_api_key_here
```

### 2. 依存関係のインストール
```bash
npm install
```

### 3. 開発サーバー起動
```bash
npm run dev
```

### 4. ブラウザで確認
http://localhost:3000 にアクセスし、右下のチャットボタンをクリック

---

## 🎨 デザイン仕様

### カラー
- ボタン: 青紫グラデーション (`from-blue-600 to-violet-600`)
- ユーザーメッセージ: 青紫グラデーション背景
- AIメッセージ: 白背景、グレー枠線
- 背景: 淡いグレー (`bg-gray-50`)

### アニメーション
- ボタンホバー: スケール拡大 (1.1倍)
- ウィンドウ開閉: フェード + スケール + Y軸移動
- メッセージ表示: フェードイン

### レイアウト
- 位置: 右下固定 (`bottom-6 right-6`)
- サイズ: 400px × 600px（最大）
- レスポンシブ: モバイルでは画面幅に合わせて調整

---

## 🔒 セキュリティ

### 実装済みの対策
1. **範囲制限**: システムプロンプトで厳格に制限
2. **APIキー保護**: 環境変数で管理、`.gitignore`に含む
3. **入力検証**: 空文字・不正リクエストの拒否
4. **エラーハンドリング**: エラー時も安全なメッセージを返す

### 今後の推奨対策
- レート制限（DDoS対策）
- ユーザー認証（必要に応じて）
- ログ記録（監視・分析用）
- CORS設定（本番環境）

---

## 📊 使用例

### 正常な質問例
```
ユーザー: 「料金を教えてください」
AI: 「当社では3つのサービスを提供しております...」

ユーザー: 「営業時間は？」
AI: 「営業時間は平日9:00-18:00です...」
```

### 範囲外の質問例
```
ユーザー: 「今日の天気は？」
AI: 「申し訳ございません。このチャットボットは株式会社Awakeのサービスに関するご質問にのみお答えしております。」

ユーザー: 「Amazonに商品を登録して」
AI: 「申し訳ございません。このチャットボットは情報提供のみを行っており、外部操作には対応しておりません。」
```

---

## 🔧 カスタマイズ方法

### 1. 会社情報の更新
`src/lib/company-data.ts` を編集
```typescript
export const COMPANY_DATA = {
  basic: {
    name: '株式会社Awake',
    // ... 他の情報
  }
}
```

### 2. チャットボットの動作調整
`src/lib/chatbot-prompt.ts` を編集
- 対応ルールの追加・変更
- トーン・スタイルの調整
- 回答文字数の変更

### 3. UIデザインの変更
`src/components/chat/ChatWidget.tsx` を編集
- カラーの変更
- アニメーションの調整
- レイアウトの変更

---

## 🌐 他サイトへの展開

### WordPress / HTML サイトへの組み込み

#### Option A: Standalone版の作成（推奨）
1. チャットボットを独立したアプリとしてビルド
2. CDN経由で配信
3. 以下のスクリプトタグで埋め込み：

```html
<!-- どのサイトにも追加可能 -->
<script src="https://awakeinc.co.jp/chatbot.js"></script>
<script>
  AwakeChatbot.init({
    apiEndpoint: 'https://awakeinc.co.jp/api/chat'
  });
</script>
```

#### Option B: iframe埋め込み
```html
<iframe
  src="https://awakeinc.co.jp/chatbot-embed"
  style="position:fixed;bottom:20px;right:20px;width:400px;height:600px;border:none;z-index:9999;"
></iframe>
```

---

## 📈 今後の拡張案

### Phase 2: 機能拡張
- [ ] 会話履歴の保存（LocalStorage）
- [ ] よくある質問のクイック返信ボタン
- [ ] ファイル添付機能（見積もり依頼など）
- [ ] 多言語対応（英語・中国語）

### Phase 3: 分析機能
- [ ] 質問内容の分析ダッシュボード
- [ ] コンバージョン追跡
- [ ] A/Bテスト機能

### Phase 4: 高度な統合
- [ ] CRMシステム連携
- [ ] 自動見積もり生成
- [ ] 予約システム連携

---

## 🐛 トラブルシューティング

### Q: チャットボタンが表示されない
A:
1. `layout.tsx`に`<ChatWidget />`が追加されているか確認
2. ブラウザのキャッシュをクリア
3. 開発サーバーを再起動

### Q: AIが応答しない
A:
1. `.env.local`にAPIキーが正しく設定されているか確認
2. ブラウザのコンソールでエラーを確認
3. APIキーの有効性を確認（https://console.anthropic.com/）

### Q: エラー: "Failed to get response from AI"
A:
1. Claude APIの利用制限に達していないか確認
2. ネットワーク接続を確認
3. サーバーログを確認（`npm run dev`の出力）

---

## 📞 サポート

問題が解決しない場合：
- GitHub Issues: [リポジトリURL]
- Email: shop@awakeinc.co.jp
- LINE: @awakeinc

---

## 📄 ライセンス

このチャットボットは株式会社Awakeの所有物です。
無断での複製・配布は禁止されています。

---

**作成日**: 2025年10月3日
**最終更新**: 2025年10月3日
**バージョン**: 1.0.0
