# 🎯 Google Ads API 完全セットアップガイド（超詳細版）

このガイドでは、Google Ads APIを使ってキーワードを完全自動化する方法を、
**画面キャプチャ付きで**詳しく説明します。

所要時間: **1時間**（休憩しながらでOK）

---

## 📋 全体の流れ

```
1. Google Cloud Consoleでの準備（15分）
   ↓
2. OAuth認証情報の取得（10分）
   ↓
3. Google広告で開発者トークン取得（10分）
   ↓
4. 設定ファイルの作成（5分）
   ↓
5. キャンペーンの作成（10分）
   ↓
6. スクリプト実行（5分）
   ↓
7. 完了！✅
```

---

## 🚀 Phase 1: Google Cloud Consoleでの準備（15分）

### Step 1-1: Google Cloud Consoleを開く

1. ブラウザで以下を開いてください：
   ```
   https://console.cloud.google.com/
   ```

2. Googleアカウントでログイン
   - すでにログイン済みの場合はそのまま

---

### Step 1-2: プロジェクトを選択

1. 画面左上の **「プロジェクト選択」** をクリック

2. 既存のプロジェクト **「awake-search-console」** を選択
   - Search Console APIで使用したものと同じです

**確認方法:**
- 画面上部のバーに「awake-search-console」と表示されていればOK

---

### Step 1-3: Google Ads APIを有効化

1. 左側メニューの **「APIとサービス」** をクリック

2. **「ライブラリ」** をクリック

3. 検索バーに **「Google Ads API」** と入力

4. **「Google Ads API」** をクリック

5. **「有効にする」** ボタンをクリック

6. 有効化完了まで数秒待機

**確認方法:**
- 「API が有効です」と表示されればOK
- または「管理」ボタンが表示されればOK

---

### Step 1-4: OAuth 2.0クライアントIDを作成

1. 左側メニューの **「APIとサービス」** → **「認証情報」** をクリック

   または直接アクセス:
   ```
   https://console.cloud.google.com/apis/credentials
   ```

2. 上部の **「+ 認証情報を作成」** をクリック

3. **「OAuth クライアント ID」** を選択

4. 「同意画面の設定」を求められた場合:
   - **「外部」** を選択
   - **「作成」** をクリック
   - アプリ名: 「Awake Google Ads Automation」
   - ユーザーサポートのメール: あなたのメール
   - デベロッパーの連絡先: あなたのメール
   - **「保存して次へ」** を3回クリック
   - **「ダッシュボードに戻る」**

5. もう一度 **「+ 認証情報を作成」** → **「OAuth クライアント ID」**

6. アプリケーションの種類: **「デスクトップアプリ」** を選択

7. 名前: **「google-ads-api-client」** と入力

8. **「作成」** をクリック

---

### Step 1-5: 認証情報をメモ

作成完了後、ポップアップが表示されます：

```
OAuth クライアントが作成されました

クライアント ID
1234567890-abcdefghijklmnop.apps.googleusercontent.com
[コピー]

クライアント シークレット
GOCSPX-abcdefghijklmnop
[コピー]
```

**重要: 以下をメモ帳に保存してください**

```
クライアントID:
（ここに貼り付け）

クライアントシークレット:
（ここに貼り付け）
```

**注意:**
- このポップアップを閉じても、後で「認証情報」ページから確認できます
- クライアントIDの横の📋アイコンでコピーできます

---

## 🔑 Phase 2: リフレッシュトークンの取得（10分）

### Step 2-1: コマンドプロンプトを開く

1. **Windowsキー** を押す

2. **「cmd」** と入力

3. **「コマンドプロンプト」** をクリック

4. 以下のコマンドを入力してEnter:
   ```
   cd C:\Users\march\awake-website
   ```

---

### Step 2-2: スクリプトを実行

コマンドプロンプトに以下を入力してEnter:

```
node scripts/google-ads-get-refresh-token.js
```

---

### Step 2-3: クライアントIDを入力

スクリプトが以下のように表示します:

```
🚀 Google Ads API - リフレッシュトークン取得

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 必要な情報:

1. Google Cloud Consoleで取得したクライアントID
2. クライアントシークレット

取得方法は docs/GOOGLE_ADS_API_SETUP.md を参照

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

クライアントID:
```

**ここで:**
1. Step 1-5でメモしたクライアントIDをコピー
2. コマンドプロンプトに貼り付け（右クリック→貼り付け）
3. Enterキーを押す

---

### Step 2-4: クライアントシークレットを入力

次に以下が表示されます:

```
クライアントシークレット:
```

**ここで:**
1. Step 1-5でメモしたクライアントシークレットをコピー
2. コマンドプロンプトに貼り付け
3. Enterキーを押す

---

### Step 2-5: ブラウザで認証

スクリプトが長いURLを表示します:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔐 以下のURLをブラウザで開いて認証してください:

https://accounts.google.com/o/oauth2/v2/auth?access_type=...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**手順:**

1. **URLをすべて選択**
   - マウスでドラッグするか
   - `https://` から最後まで

2. **コピー**
   - 右クリック→コピー
   - または Ctrl+C

3. **ブラウザの新しいタブに貼り付け**
   - アドレスバーに貼り付け
   - Enterキーを押す

4. **Googleログイン画面が表示される**
   - すでにログイン済みの場合はスキップ

5. **権限の確認画面が表示される**
   ```
   Awake Google Ads Automation が Google アカウントへのアクセスをリクエストしています

   このアプリは次の操作を行います:
   ☑ Google 広告アカウントを表示、管理

   [許可] [キャンセル]
   ```

6. **「許可」をクリック**

7. **認証コードが表示される**
   ```
   このコードをアプリケーションに戻してください:

   4/0AanRRrtXXXXXXXXXXXXXXXXXXXXXXXXXX

   [コピー]
   ```

8. **認証コードをコピー**
   - [コピー]ボタンをクリック
   - またはコードを選択してCtrl+C

---

### Step 2-6: 認証コードを入力

コマンドプロンプトに戻って:

```
認証コードを入力してください:
```

**ここで:**
1. 先ほどコピーした認証コードを貼り付け（右クリック→貼り付け）
2. Enterキーを押す

---

### Step 2-7: リフレッシュトークンが表示される

成功すると以下のように表示されます:

```
✅ 認証成功！

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 以下の情報を google-ads-config.json に保存してください:

{
  "client_id": "1234567890-abcdefg.apps.googleusercontent.com",
  "client_secret": "GOCSPX-abcdefg",
  "refresh_token": "1//0abcdefghijklmnopqrstuvwxyz",
  "developer_token": "ここに開発者トークンを入力",
  "customer_id": "ここに顧客IDを入力（例: 1234567890）",
  "login_customer_id": "ここにログイン顧客IDを入力（通常は顧客IDと同じ）"
}
```

**重要: この情報をメモ帳にコピーして保存してください**

---

## 🎫 Phase 3: Google広告で開発者トークン取得（10分）

### Step 3-1: Google広告管理画面を開く

ブラウザで以下を開く:
```
https://ads.google.com/
```

---

### Step 3-2: ツールと設定を開く

画面右上の **🔧（スパナ/レンチのアイコン）** をクリック

---

### Step 3-3: APIセンターに移動

1. メニューから **「設定」** を探す

2. **「APIセンター」** をクリック

---

### Step 3-4: 開発者トークンを申請

**初めての場合:**

1. **「API アクセスを開始する」** ボタンをクリック

2. 利用目的を記入:
   ```
   自社のGoogle広告運用を効率化するため、
   キーワードの追加・削除・入札調整などの
   日常的な作業を自動化します。
   外部クライアントへのサービス提供は行いません。
   ```

3. **「送信」** をクリック

4. すぐに **テスト用開発者トークン** が発行されます

**すでにAPIセンターにアクセスしたことがある場合:**

1. 「開発者トークン」の欄に表示されているトークンをコピー

---

### Step 3-5: 開発者トークンをメモ

```
開発者トークン: Ab12CdEf34GhIj56
```

**重要: これもメモ帳に保存してください**

**注意:**
- テストトークンは自社アカウントのみ操作可能
- 本番利用には審査が必要ですが、後日自動承認されることが多い
- まずはテストトークンで問題なく動作します

---

## 🆔 Phase 4: 顧客IDの確認（1分）

### Step 4-1: 顧客IDを確認

Google広告管理画面の **右上** を見てください。

```
例: 123-456-7890
```

このような形式の数字が表示されています。

---

### Step 4-2: ハイフンを削除

APIでは、ハイフンなしの数字だけを使用します:

```
元: 123-456-7890
使用する: 1234567890
```

**重要: これもメモ帳に保存してください**

---

## 📝 Phase 5: 設定ファイルの作成（5分）

### Step 5-1: VSCodeでファイルを作成

1. VSCodeを開く

2. エクスプローラーで **プロジェクトルート**（awake-website）を右クリック

3. **「新しいファイル」** を選択

4. ファイル名: **`google-ads-config.json`** と入力

5. Enterキーを押す

---

### Step 5-2: 設定情報を入力

以下の内容をコピーして、ファイルに貼り付けてください:

```json
{
  "developer_token": "",
  "client_id": "",
  "client_secret": "",
  "refresh_token": "",
  "customer_id": "",
  "login_customer_id": ""
}
```

---

### Step 5-3: 各項目を埋める

メモ帳に保存した情報を使って、`""` の中に値を入力します:

```json
{
  "developer_token": "Ab12CdEf34GhIj56",
  "client_id": "1234567890-abcdefg.apps.googleusercontent.com",
  "client_secret": "GOCSPX-abcdefg",
  "refresh_token": "1//0abcdefghijklmnopqrstuvwxyz",
  "customer_id": "1234567890",
  "login_customer_id": "1234567890"
}
```

**注意:**
- `customer_id` と `login_customer_id` は通常同じ値
- ハイフンは削除
- ダブルクォート `"` で囲む

---

### Step 5-4: ファイルを保存

1. **Ctrl + S** を押す

2. ファイルが保存されます

**確認:**
- ファイル名の横の ● が消えていればOK

---

## 🎯 Phase 6: キャンペーンの作成（10分）

スクリプトを実行する前に、Google広告管理画面で
キャンペーンと広告グループを作成する必要があります。

### Step 6-1: 新しいキャンペーンを作成

1. Google広告管理画面 https://ads.google.com/ を開く

2. 左メニューの **「キャンペーン」** をクリック

3. 青い **「+ 新しいキャンペーン」** ボタンをクリック

---

### Step 6-2: キャンペーン目標を選択

1. 目標: **「ウェブサイトのトラフィック」** を選択

2. **「続行」** をクリック

---

### Step 6-3: キャンペーンタイプを選択

1. キャンペーンタイプ: **「検索」** を選択

2. **「続行」** をクリック

---

### Step 6-4: キャンペーン設定

以下を入力してください:

```
キャンペーン名: ホームページ制作

ネットワーク:
☑ Google 検索
☑ 検索パートナー
☐ ディスプレイ ネットワーク（チェックを外す）

地域: 日本

言語: 日本語

予算: 1000 円/日

入札戦略: クリック数の最大化
```

---

### Step 6-5: 広告グループを作成

1. **「広告グループ名」** を入力:
   ```
   一般キーワード
   ```

2. **「デフォルトの入札単価」** を入力:
   ```
   150 円
   ```

---

### Step 6-6: とりあえず1つキーワードを入力

スクリプトで追加するので、ここでは仮のキーワードを1つだけ:

```
ホームページ制作
```

---

### Step 6-7: 広告をスキップ

1. **「次へ」** をクリック

2. 広告作成画面が表示されたら、一旦 **「後で作成」** または **「スキップ」**

3. または、簡易的に以下を入力:
   ```
   広告見出し1: ホームページ制作13.2万円〜
   広告見出し2: 東大和市のWeb制作会社
   広告見出し3: 中小企業向けHP制作

   説明文1: 東大和市の株式会社Awakeが適正価格で制作。
   説明文2: 13.2万円〜、3週間納品、SEO対策込み。

   最終ページURL: https://www.awakeinc.co.jp/
   ```

---

### Step 6-8: キャンペーンを公開

1. すべて入力したら **「キャンペーンを公開」** をクリック

2. ✅ キャンペーンが作成されます

---

### Step 6-9: キャンペーンを一時停止

**重要: まだ配信開始しません**

1. キャンペーン一覧で、今作ったキャンペーンの横の **スイッチ** をクリック

2. **「一時停止」** にする

**理由:**
- キーワードを追加してから配信開始したい
- 広告文をしっかり設定してから

---

## 🚀 Phase 7: スクリプト実行（5分）

### Step 7-1: コマンドプロンプトを開く

1. Windowsキー → `cmd` → Enter

2. プロジェクトフォルダに移動:
   ```
   cd C:\Users\march\awake-website
   ```

---

### Step 7-2: スクリプトを実行

以下のコマンドを入力してEnter:

```
node scripts/google-ads-add-keywords.js
```

---

### Step 7-3: 結果を確認

成功すると以下のように表示されます:

```
🚀 Google Ads API - キーワード自動追加

📋 設定ファイル読み込み中...
✅ 顧客ID: 1234567890

🔐 Google Ads API認証中...
✅ 認証成功

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📂 ホームページ制作 / 一般キーワード
  🔍 キャンペーン検索中...
  ✅ キャンペーンID: 12345678
  🔍 広告グループ検索中...
  ✅ 広告グループID: 87654321
  📤 キーワード追加中（10個）...
  ✅ 成功: 10個のキーワードを追加

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 実行結果:

  ✅ 追加成功: 10個

🎉 キーワード追加完了！
```

---

### Step 7-4: Google広告管理画面で確認

1. https://ads.google.com/ を開く

2. **「キーワード」** タブをクリック

3. **10個のキーワード** が追加されていることを確認

---

## ✅ 完了！

お疲れ様でした！これで、Google Ads APIを使って
キーワードを自動追加できるようになりました。

---

## 🔄 今後の使い方

### キーワードを追加したいとき

```bash
node scripts/google-ads-add-keywords.js
```

このコマンドを実行するだけで、設定済みのキーワードが自動追加されます。

---

### Claude Codeに依頼する

「Google広告のキーワードを追加してください」と依頼すると、
私（Claude Code）が上記のコマンドを実行します。

または、

「ホームページ制作のキーワードを20個追加してください」と依頼すると、
私がキーワードリストを更新してからスクリプトを実行します。

---

## 🛠️ トラブルシューティング

### エラー: 「設定ファイルが見つかりません」

**原因:** google-ads-config.json が正しく作成されていない

**解決策:**
1. プロジェクトルートに google-ads-config.json があるか確認
2. ファイル名が正しいか確認（.txt になっていないか）

---

### エラー: 「開発者トークンが無効です」

**原因:** developer_token が間違っている

**解決策:**
1. Google広告 → ツールと設定 → APIセンター
2. 開発者トークンを再確認
3. google-ads-config.json を修正

---

### エラー: 「キャンペーンが見つかりません」

**原因:** キャンペーンが作成されていない、または名前が一致していない

**解決策:**
1. Google広告管理画面でキャンペーンを確認
2. キャンペーン名が「ホームページ制作」になっているか確認
3. キャンペーンが削除されていないか確認

---

### エラー: 「広告グループが見つかりません」

**原因:** 広告グループが作成されていない、または名前が一致していない

**解決策:**
1. キャンペーン内に広告グループ「一般キーワード」があるか確認
2. 広告グループが削除されていないか確認

---

### エラー: 「権限がありません」

**原因:**
- refresh_token が無効
- customer_id が間違っている
- テストトークンで他のアカウントを操作しようとしている

**解決策:**
1. refresh_token を再取得
   ```
   node scripts/google-ads-get-refresh-token.js
   ```
2. customer_id を再確認
3. テストトークンは自社アカウントのみ操作可能

---

## 📞 サポート

### Google広告の無料サポート
```
電話: 0120-214-031
営業時間: 月〜金 9:00-18:00
```

「Google Ads APIの設定で困っています」と伝えてください。

---

### Claude Codeに質問

このドキュメントの内容でわからないことがあれば、
いつでも質問してください。

例:
- 「Step 2-3がうまくいきません」
- 「エラーメッセージの意味がわかりません」
- 「google-ads-config.json の書き方を教えてください」

---

## 🎉 次のステップ

API設定が完了したら：

### 1. 広告文を設定
- [GOOGLE_ADS_COPY.md](./GOOGLE_ADS_COPY.md) を参照

### 2. 除外キーワードを追加
```bash
# 今後実装予定
node scripts/google-ads-add-negative-keywords.js
```

### 3. 配信開始
- 日予算: 2,000円
- 60日間で6万円使ってプロモーションクレジット獲得

### 4. 定期的な最適化
週1回、Claude Codeに以下を依頼：
- 「Google広告のパフォーマンスを確認してください」
- 「効果の低いキーワードを削除してください」
- 「新しいキーワードを追加してください」

---

**作成日:** 2025年10月22日
**作成者:** Claude Code
**対象:** 株式会社Awake
**目的:** Google Ads API完全自動化
